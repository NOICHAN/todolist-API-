{"version":3,"file":"js/24.cd2b5881.js","mappings":"63BAoCA,MAAMA,GAAQC,EAAAA,EAAAA,IAAO,SACfC,GAAOD,EAAAA,EAAAA,IAAO,SACdE,GAASC,EAAAA,EAAAA,MAETC,GAAOC,EAAAA,EAAAA,IAAI,CACfC,MAAO,GACPC,SAAU,KAGNC,EAAQC,UACZ,IACE,MAAM,KAAEC,EAAF,QAAQC,SAAkBZ,EAAMa,KAAK,gBAAiB,CAAER,KAAMA,EAAKS,QACzEC,SAASC,OAAU,SAAQJ,EAAQK,gCACnCF,SAASC,OAAU,YAAWL,EAAKO,WACnClB,EAAMmB,SAASP,QAAQQ,OAAOC,cAAgBN,SAASC,OAAOM,QAAQ,8CAA+C,MACrHpB,EAAKqB,KAAK,CACRC,KAAM,UACNC,MAAO,KACPC,KAAM,UAERvB,EAAOwB,KAAK,KACZ,MAAOC,GACP1B,EAAKqB,KAAK,CACRC,KAAM,QACNC,MAAO,KACPC,KAAO,GAAEE,EAAMC,SAASlB,KAAKmB,c,y1BCvDnC,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://todolist-api/./src/views/LogIn.vue","webpack://todolist-api/./src/views/LogIn.vue?d787"],"sourcesContent":["<template>\r\n  <div class=\"loginView bg-yellow js-view\">\r\n  <div class=\"conatiner loginPage vhContainer \">\r\n    <div class=\"side\">\r\n      <!-- eslint-disable-next-line vuejs-accessibility/anchor-has-content -->\r\n      <a href=\"#\"><img class=\"logoImg\" src=\"https://upload.cc/i1/2022/03/23/rhefZ3.png\" alt=\"\"></a>\r\n      <img class=\"d-m-n\" src=\"https://upload.cc/i1/2022/03/23/tj3Bdk.png\" alt=\"workImg\">\r\n    </div>\r\n    <div>\r\n      <form class=\"formControls\" action=\"index.html\">\r\n        <h2 class=\"formControls_txt\">最實用的線上代辦事項服務</h2>\r\n        <label class=\"formControls_label\" for=\"email\">Email\r\n          <input class=\"formControls_input login_email\"\r\n          type=\"text\" id=\"email\" name=\"email\" placeholder=\"請輸入 email\" required v-model=\"user.email\">\r\n        </label>\r\n        <label class=\"formControls_label\" for=\"pwd\">密碼\r\n          <input class=\"formControls_input login_password\"\r\n          type=\"password\" name=\"pwd\" id=\"pwd\" placeholder=\"請輸入密碼\" required v-model=\"user.password\">\r\n        </label>\r\n        <input class=\"formControls_btnSubmit login\" type=\"button\" value=\"登入\" @click=\"logIn\">\r\n        <router-link class=\"formControls_btnLink js-signUpPage\" to=\"/signup\">註冊帳號</router-link>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/assets/main.scss';\r\n\r\n</style>\r\n\r\n<script setup>\r\nimport { ref, inject } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst axios = inject('axios');\r\nconst swal = inject('$swal');\r\nconst router = useRouter();\r\n\r\nconst user = ref({\r\n  email: '',\r\n  password: '',\r\n});\r\n\r\nconst logIn = async () => {\r\n  try {\r\n    const { data, headers } = await axios.post('users/sign_in', { user: user.value });\r\n    document.cookie = `token=${headers.authorization}; max-age=86400;`;\r\n    document.cookie = `nickname=${data.nickname}`;\r\n    axios.defaults.headers.common.Authorization = document.cookie.replace(/(?:(?:^|.*;\\s*)token\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\r\n    swal.fire({\r\n      icon: 'success',\r\n      title: '成功',\r\n      text: '登入成功。',\r\n    });\r\n    router.push('/');\r\n  } catch (error) {\r\n    swal.fire({\r\n      icon: 'error',\r\n      title: '失敗',\r\n      text: `${error.response.data.message}`,\r\n    });\r\n  }\r\n};\r\n\r\n</script>\r\n","import script from \"./LogIn.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LogIn.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LogIn.vue?vue&type=style&index=0&id=cbd543ca&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Front End\\\\Vue\\\\todolist-api\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-cbd543ca\"]])\n\nexport default __exports__"],"names":["axios","inject","swal","router","useRouter","user","ref","email","password","logIn","async","data","headers","post","value","document","cookie","authorization","nickname","defaults","common","Authorization","replace","fire","icon","title","text","push","error","response","message","__exports__"],"sourceRoot":""}